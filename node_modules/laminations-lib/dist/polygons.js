"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fractions_1 = require("./fractions");
const chords_1 = require("./chords");
const immutable_1 = require("immutable");
const util_1 = require("./util");
const create = (points) => util_1.withCachedToString(toString, {
    points: points.sort(fractions_1.Fractions.compare)
});
const fromChord = (chord) => create(immutable_1.List.of(chord.lower, chord.upper));
const mapForward = (polygon) => create(polygon.points.map(fractions_1.Fractions.mapForward));
const toChords = (polygon) => {
    const points = polygon.points;
    const lastIdx = points.size - 1;
    return immutable_1.List().withMutations(result => {
        for (let i = 0; i < lastIdx; i++) {
            result.push(chords_1.Chords.create(points.get(i), points.get(i + 1)));
        }
        if (points.size > 2) {
            result.push(chords_1.Chords.create(points.first(), points.last()));
        }
    });
};
const toString = (polygon) => polygon.points.join(', ');
exports.Polygons = {
    create,
    fromChord,
    mapForward,
    toChords,
    toString,
};
//# sourceMappingURL=polygons.js.map